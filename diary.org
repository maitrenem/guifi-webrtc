* Diary
Everyday it's a-gettin' closer
** <2015-05-13 Wed>--<2015-05-22 Fri> sprint 1
*** <2015-05-20 Wed>
- Documment theory, read.
- Move contents of thesis.pdf.bkp to thesis.org
- Fundamentals, State of the Art
*** <2015-05-19 Tue>
- Write a document that identify the kind of tasks for the project, like WBS, last section of methodology
- finish introduction and methodology sections of the project
- XMPP research
  - prosody
    - very simple XMPP chat using strophe (and bosh) https://prosody.im/chat/
    - usa lua como qmp
    - https://code.google.com/p/prosody-modules/wiki/mod_carbons
  - ejabberd
    - old docs: https://www.process-one.net/docs/ejabberd/guide_en.html#htoc80
    - fully XMPP compliant
    - web admin <ip>:5280/admin
      - user:   password: ?
    - documentation: https://www.process-one.net/en/ejabberd/docs/
    - config file
      - debian wheezy 7 does not have yaml (/etc/ejabberd/ejabberd.cfg) (new thing in config)
      - debian 8 yes (/etc/ejabberd/ejabberd.yml)
        - has nothing in admin gui, doc: http://ip:5280/admin/doc/guide.html#toc
    - small tricks https://www.ejabberd.im/tricks
    - get admin user:
      - /etc/ejabberd/ejabberd.conf ->
        - {acl, admin, {user, "admin", "ip"}}.
        - {hosts, ["ip"]}.
      - service ejabberd restart
      - ejabberdctl register admin <ip> password
  - prosody vs ejabberd: http://comments.gmane.org/gmane.linux.debian.freedombox.user/2372
    - ejabberd has webadministration but bypass config files
  - buddycloud http://buddycloud.com/documentation, seems is a protocol itself (buddycloud channels http://xmpp.org/extensions/inbox/buddycloud-channels.html), is not XMPP standard
    - http://buddycloud.com/install (DNS)
    - uses prosody
- workflow idea
  - XMPP PoC
    - Configure Prosody
    - Test against the prosody chat webapp (BOSH)
    - Try with websockets
  - LDAP guifi
  - Integrated PoC, SIP + XMPP
  - later, try with candy chat (more advanced XMPP chat)
    - https://github.com/candy-chat/candy/wiki/Installing-a-XMPP-server
- Next week work on DNS's: config DNS's in software and develop guifi drupal dns thing
- xmpp vocabulary
  - JID: Jabber Identifier
  - 5222: xmpp client connection
  - roster: contact list. A user's roster is stored by the user's server on the user's behalf so that the user may access roster information from any resource.
    - Note: There are important interactions between rosters and subscriptions; these are defined under Integration of Roster Items and Presence Subscriptions, and the reader must refer to that section for a complete understanding of roster management.
    - http://xmpp.org/rfcs/rfc3921.html#int
- trying prosody
- XMPP was known as jabber http://en.wikipedia.org/wiki/XMPP#History
- c2s/s2s: client to server/server 2 server connections (with tls)
- Prosody (going depth)
  - first, configure DNS's. Seems that simply with an A domain, is sufficient
  - http://prosody.im/doc/configure
  - http://prosody.im/doc/example_config
  - https://prosody.im/doc/creating_accounts
  - https://prosody.im/doc/setting_up_bosh
  - developers
    - https://prosody.im/doc/developers/http
    - https://prosody.im/doc/developers
- 
  - http://xmpp.org/extensions/xep-0029.html
  - http://tools.ietf.org/html/rfc6122
  - http://tools.ietf.org/html/rfc3920
*** <2015-05-18 Mon>
- Finishing Project Charter
  - Scope
  - Planning
  - SWOT
- Codecs supported by WebRTC http://www.webrtc.org/faq#TOC-What-codecs-are-supported-in-WebRTC-
- Major components of WebRTC http://en.wikipedia.org/wiki/WebRTC#Design
*** <2015-05-17 Sun>
- Continue Project Charter, end contents of:
  - motivation
  - objectives
  - resources
  - planning (not finished)
*** <2015-05-16 Sat>
- Document Structure
- Project Charter and Tasks (~wbs) deliverables, and how they integrate in the Document Structure
  - table for resources
  - gantt diagram for planning
- Make the latex thing compile
- Formal things, remember
  - http://repositori.upf.edu/handle/10230/20036
  - http://www.upf.edu/bibtic/es/guiesiajudes/eines/tesis/quart.html
*** <2015-05-15 Fri>
**** Please do
- documentation for WebRTC
  - http://www.html5rocks.com/en/tutorials/webrtc/basics
    - extra? https://hacks.mozilla.org/2012/03/video-mobile-and-the-open-web/
- write day: Title, Abstract, Document Structure
**** Did
- Jingle, seems a pre-WebRTC release (2009)
  - http://xmpp.org/extensions/xep-0167.html
  - http://en.wikipedia.org/wiki/Jingle_(protocol)
- TLS vs SSL (that is used in HTTPS and WSS): http://stackoverflow.com/questions/3690734/difference-between-ssl-tls
- Dynamic federation (looking SRV record) http://ocsguy.com/2011/04/20/a-few-words-on-federation/
- Autodiscover SRV http://blogs.technet.com/b/rmilne/archive/2014/10/02/how-to-check-exchange-autodiscover-srv-record-using-nslookup.aspx
- XMPP library websockets webrtc https://gowebrtc.me/
***** RFC inspection
****** important
- NAPTR: pointer to services in a domain RFC2915 https://www.ietf.org/rfc/rfc2915.txt
- SRV
  - RFC2782 updated by RFC6335
  - RFC3832 remote service discovery: Remote Service Discovery in the Service Location Protocol (SLP) via DNS SRV
****** others
- the only RFC's about Websockets are [I included them as bibliography]:
  - RFC6455 (websocket itself)
  - RFC7118 (ws sip)
  - RFC7355 (ws sip upgrade (?) *CHECK*)
  - RFC7395 (ws xmpp)
- this seems interesting
  - RFC7478 Web Real-Time Communication Use Cases and Requirements
  - RFC7362 Latching: Hosted NAT Traversal (HNT) for Media in Real-Time Communication
  - key person: E. Ivov (XMPP)
    - P2P RTC 5765
    - 7081 *CUSAX: Combined Use of the Session Initiation Protocol (SIP) and the Extensible Messaging and Presence Protocol (XMPP)*
      - Historically, SIP [RFC3261] and XMPP [RFC6120] have often been implemented and deployed with different purposes: from its very start, SIP's primary goal has been to provide a means of conducting "Internet telephone calls".  On the other hand, XMPP has, from its Jabber days, been mostly used for instant messaging, presence [RFC6121], and related services such as groupchat rooms [XEP-0045].
      - In the context of the SIP for Instant Messaging and Presence Leveraging Extensions (SIMPLE) working group, the IETF has defined a number of protocols and protocol extensions that not only allow for SIP to be used for regular instant messaging and presence but that also provide mechanisms for related features such as multi-party chat, server-stored contact lists, and file transfer [RFC6914].
      - Similarly, the XMPP community and the XMPP Standards Foundation have worked on defining a number of XMPP Extension Protocols (XEPs) that provide XMPP implementations with the means of establishing end-to-end sessions. These extensions are often jointly referred to as Jingle [XEP-0166], and arguably their most popular use case is audio and video calling [XEP-0167].
  - 7106 a group text chat purpose... SIP event package..?
  - V. Pascual
    - RFC7332 RFC7092 about SIP and B2BUAs
- RFC5194 Framework for Real-Time Text over IP Using the SIP
- RFC6464 and 6465 E. Ivov RTP Header client to mixer audio level indication
*** <2015-05-14 Thu>
**** doc and links
- work on ws XMPP
  - prosody ldap http://prosody.im/doc/authentication https://code.google.com/p/prosody-modules/wiki/mod_auth_ldap
    - http://rtcquickstart.org/guide/multi/xmpp-server-prosody.html#idp62916736
  - BOSH working with Ejabberd, Firefox and Strophe http://anders.conbere.org/2011/05/03/get_xmpp_-_bosh_working_with_ejabberd_firefox_and_strophe.html
- work on ws SIP
  - kamailio ldap http://www.kamailio.org/wiki/tutorials/mini-howto-admin/ldap-user-auth http://www.kamailio.org/dokuwiki/doku.php/tutorials:kamailio31-auth-ldap
    - http://www.kamailio.org/wiki/tutorials/mini-howto-admin/ldap-user-auth
    - http://www.kamailio.org/dokuwiki/doku.php/tutorials:kamailio31-auth-ldap
  - test lumicall thing (is another jssip invent, but more interesting to reuse, is from debian)
    - https://rtc.debian.org/
- nested LDAP
- resiprocate offers SIP proxy and TURN server http://julianalouback.com/tech/2014/10/30/jscommunicator-at-xtuplecon-2014/
- Server-side WebRTC Infrastructure http://www.slideshare.net/Dialogic/serverside-webrtc-infrastructure-chad-hart-dialogic
  - WebRTC Gateway :: interworks signalling and media with existing VoIP networks
  - Media Server :: Provides conferencing recording, interworking, transcoding, stream processing
- Daniel Pocock anouncing new SIP service for Debian community https://lists.debian.org/debian-devel-announce/2014/01/msg00004.html
  - A key feature of this SIP deployment is that it supports federated inter-connectivity with other SIP domains from the outset.  Please try it.  For details of how it works and how we establish trust between domains, please see RFC 5922 http://tools.ietf.org/html/rfc5922
  - rAsterisk compatible with WebRTC https://wiki.debian.org/UnifiedCommunications/DebianDevelopers/UserGuide/Asterisk
  - NAPTR debian http://danielpocock.com/naptr-record-for-debian-org
  - https://wiki.debian.org/UnifiedCommunications/DebianDevelopers/FAQ
    - about contact list
    - it is stateful proxy


**** what I did
- download last firefox and google chrome binaries from its sites to do all tests
  - don't know if I can use the debian ones
- trying *cloudy*
  - installed debian 8
  - cloudynitzar it (https://github.com/Clommunity/cloudynitzar)
    - lost IP, reboot and =apt-get -y remove getinconf-client= applied
    - apt-get autoremove: =liblzo2-2 tinc=
  - installed dnsservices through web application (http://ADDRESS:7000)
    - src http://cloudy.community/get-started/
- *jscommunicator*
  - trying with github repo, development version
    - src: setup and architecture http://julianalouback.com/tech/2014/08/11/jscommunicator-setup-and-architecture/
      - others
        - translation? http://julianalouback.com/tech/2014/08/14/jscommunicator-2.0-is-live/
        - contribute translation: http://julianalouback.com/tutorial/2014/07/17/contribute-a-jscommunicator-translation/
    - debian 8 installed (debian 7 -> libjs-jquery-i18n-properties not found)
    - apt-get install kamailio withouth AUTH in registers
    - git clone https://github.com/opentelecoms-org/jscommunicator jsc
    - sudo apt-get install libjs-jquery libjs-arbiter libjs-jquery-i18n-properties libjs-jquery-ui libjs-jssip fonts-font-awesome
    - as suggested by the /var/www/html/jsc/phone-dev.shtml file, =a2enmod include=
      - what means .shtml? indicates a file that includes some information that will be added "on the fly"
        - src http://searchsoa.techtarget.com/definition/shtml
    - put =Options +Includes= in the default directory of apache's debian 8 /etc/apache2/apache2.conf
      #+begin_src
      <Directory /var/www/>
              Options Indexes FollowSymLinks
              AllowOverride None
              Require all granted
              Options +Includes
      </Directory>
      #+end_src
    - <ip>/jscommunicator/phone-dev.shtml
    - try with latest jssip library
      - http://jssip.net/download/jssip-devel.js not working anymore, redirects to http://jssip.net
      - http://jssip.net/download/releases/ took http://jssip.net/download/releases/jssip-0.6.26.js
    - missing GET http://10.1.56.214/jsc/images/ui-icons_222222_256x240.png 404 (Not Found)
      - fixed (from jsc directory):
        - mkdir images
        - wget http://theobjective.com/static/grappelli/jquery/ui/css/custom-theme/images/ui-icons_222222_256x240.png -O images/ui-icons_222222_256x240.png
          - src http://stackoverflow.com/questions/19515943/icons-missing-in-jquery-ui
  - trying the package for debian8 (.deb)
    - installed debian 8
    - apt-get install jscommunicator-web-phone
      - suggested for xmpp-server (ejabberd, prosody)
    - next steps seems configure with *resiprocate* (instead of kamailio) http://danielpocock.com/get-webrtc-going-faster
      - is the same as this config file? http://rtcquickstart.org/guide/multi/sip-proxy-repro.html#repro-config-file
      - repro config http://www.sipspectrum.com/blog
      - http://www.resiprocate.org/WebRTC_and_SIP_Over_WebSockets
  - *freephonebox* (anonymous calls, call without register) is a jscommunicator that register an anonymous user in the configuration. seems that is not protected (only register from a webpage)
    - article: launching freephonebox, http://danielpocock.com/launching-freephonebox-net
  - *clicktocall* could be possible touching dialing autodial onstartup with the preferred destination in config.js
  - WebRTC to SIP is not working, due to the low version?
  - with JSSIP alone I cannot call to standard SIP clients, /seems I need oversip/. What happens is that media (RTP) of WebRTC is incompatible with media of SIP, it is needed a media gateway (example, http://www.rtpproxy.org/)
    - http://es.slideshare.net/elastixorg/jssip-sip-webrtc
- xmpp stuff (https://xmpp.org/xmpp-software/clients/ all xmpp clients, check browser ones)
  - trying *candy-chat* (XMPP)
    - http://candy-chat.github.io/candy/
      - src http://candy-chat.github.io/candy/#setup
      - https://github.com/candy-chat/candy/wiki/Installing-a-XMPP-server
      - to be continued
  - places where rated jappixx and candy as good things:
    - https://is-a-furry.org/list-finished-finetuning-candy-maintaing-jappix/
    - http://raspberrypi.stackexchange.com/questions/4414/irc-xmpp-web-based-chat-client-or-bnc
  - trying *jappix* (XMPP)
    - about jappix
      - use webrtc? https://community.igniterealtime.org/blogs/ignite/2012/07/19/jappix-websockets-webrtc-and-jingle
      - jappix mini https://github.com/jappix/jappix/issues/192
    - XMPP server https://github.com/jappix/jappix/wiki/XmppServer
    - https://github.com/jappix/jappix/issues/549
    - by this info, websockets is not supported https://github.com/jappix/jappix/blob/master/PROTOCOL.md
- trying http://otalk.org/, discarded, need too much work to do on it
*** <2015-05-13 Wed>
- guifi voip
  - LDAP nested
  - verify that LDAP works (example from there) ldapsearch -x -h 10.139.50.2 -b dc=ripollet,guifi,dc=net -LLL SIPIdentityUserName=1*1
    - apt-cache serach ldapsearch -> ldapscripts ldapvi (installed)
      - https://github.com/guifi/guifiproxy/tree/master/guifi-proxy3-1
  - register user with LDAP figure 4.2
- kamailio modules: C, prosody modules: lua
- /closed/ implementation (should be more modular) https://github.com/strukturag/spreed-webrtc
- adding new service to cloudy (is not easy, seems out of scope) https://github.com/Clommunity/Doc/blob/master/plugins/pastecat/pastecat.md
- draws
  - [[img/architecture-design-client-serverstack.png]]
  - [[img/deployment.png]]
  - [[img/phases.png]]
  - [[img/server-federation.png]]
**** how it works guifi dnsservices
- guifi module manages the domain
- dnsservices is a PHP script executed ([cron] every 30 seconds) in the DNS server of each zone. Query the guifi web with its own ID of DNS service and get domain configuration for the zone in XML format. It parses the XML and translate it in a config file (named.conf) for bind dns. Also creates the config files for master zone if it has it.
- example
  - ID 2627 is the gurb's DNS zone
    - In that DNS server there are configured some domain master, one of them, guifi.net
    - this is what gets the dnsservices.php http://miquelm.guifi.net/guifi/cnml/2627/domains
      - the important thing is this row: <master zone="guifi.net" IPv4="10.138.0.2" nameserver="ns1" domain_ip="10.38.141.69" domain_ip_v6="2a00:1508::5" externalMX="" externalNS="" allow-transfer="any" contact="name.surname@guifi.net" domain_id="1" service_id="2627">
**** preparing guifi development environment 
- src http://ca.wiki.guifi.net/wiki/Preparant_l'entorn_de_desenvolupament
- installation of requirements
  - install debian 8
  - apt-get install mysql-server libapache2-mod-php5 php5-gd php5-mysql
  - echo -e "extension=mysql.so\nextension=iconv.so\nextension=gd.so" >> /etc/php5/apache2/php.ini
  - echo -e "<?php\nphpinfo();\n?>" >> /var/www/html/test.php
    - check in browser: <serverip>/test.php
  - Allow Override All, is not in /etc/apache2/sites-enabled/000-default is in /etc/apache2/apache2.conf 
    - src http://stackoverflow.com/questions/18740419/how-to-set-allowoverride-all
- placing drupal
  - wget http://ftp.drupal.org/files/projects/drupal-6.29.tar.gz
  - tar xvf drupal-6.29
  - mv drupal-6.29 drupal
  - ln -s /root/drupal /var/www/html/guifi
    - doesn't like symbolic links
  - mv /root/drupal /var/www/html/guifi
  - mkdir /var/www/html/guifi/sites/all/modules
  - cd /var/www/html/guifi/sites/all/modules
- download modules
  - generic modules
    - wget http://ftp.drupal.org/files/projects/webform-6.x-3.19.tar.gz http://ftp.drupal.org/files/projects/views-6.x-2.16.tar.gz http://ftp.drupal.org/files/projects/views_slideshow-6.x-2.4.tar.gz  http://ftp.drupal.org/files/projects/i18n-6.x-1.10.tar.gz  http://ftp.drupal.org/files/projects/schema-6.x-1.7.tar.gz  http://ftp.drupal.org/files/projects/devel-6.x-1.27.tar.gz  http://ftp.drupal.org/files/projects/potx-6.x-3.3.tar.gz  http://ftp.drupal.org/files/projects/l10n_client-6.x-2.2.tar.gz  http://ftp.drupal.org/files/projects/language_sections-6.x-2.5.tar.gz  http://ftp.drupal.org/files/projects/diff-6.x-2.3.tar.gz  http://ftp.drupal.org/files/projects/captcha-6.x-2.5.tar.gz  http://ftp.drupal.org/files/projects/captcha_pack-6.x-1.0-beta3.tar.gz  http://ftp.drupal.org/files/projects/event-6.x-2.x-dev.tar.gz  http://ftp.drupal.org/files/projects/cck-6.x-2.9.tar.gz  http://ftp.drupal.org/files/projects/fckeditor-6.x-2.3.tar.gz  http://ftp.drupal.org/files/projects/image-6.x-1.2.tar.gz  http://ftp.drupal.org/files/projects/image_filter-6.x-1.0.tar.gz  http://ftp.drupal.org/files/projects/fivestar-6.x-1.20.tar.gz  http://ftp.drupal.org/files/projects/votingapi-6.x-2.3.tar.gz
      - missing modules: language, icons (no link)
    - modules not documented
      - ckeditor has 2 parts, the drupal module and the web application (this module is not in the documentation)
        - module. to download/install a module by name is, =drush en ckeditor -y=
          - src http://drupal.stackexchange.com/questions/60375/drush-command-to-download-and-enable-a-module
        - web application
          - =cat /var/www/html/guifi/sites/all/modules/ckeditor/ckeditor/COPY_HERE.txt= say to download there the web application
          - =cd /var/www/html/guifi/sites/all/modules/ckeditor/ckeditor/=
          - wget http://download.cksource.com/CKEditor/CKEditor/CKEditor%204.4.7/ckeditor_4.4.7_standard.zip
          - unzip *.zip
            - apt-get install zip
          - mv ckeditor/* .
          - ckeditor.js should be placed in /var/www/html/guifi/sites/all/modules/ckeditor/ckeditor/ckeditor.js
        - to quit the translator footer edit the user and quit its role of "translator"
        - after the update, it needs to dump again the mysql database
      - more modules!
        - list
          - Front Page        6.x-2.0-rc1
          - EU Cookie Compliance        6.x-1.10
          - Spambot        6.x-3.4
          - Language icons        6.x-2.1
          - Openid Provider        6.x-1.0
          - PDF version        6.x-1.19
          - Smileys        6.x-1.1
        - install it with drush: =drush en spambot languageicons openid_provider print smileys=
          - install separately
            - front (install front_page) and tries to overwrite constantly front
            - eu_cookie_compliance [by hand] bug, if you put eu_cookie_compliance there is an error (machine readable error) -> put it by hand
          - https://www.drupal.org/project/print
  - guifi modules ( /var/www/html/guifi/sites/all/modules )
    - guifi module: git clone https://github.com/guifi/drupal-guifi guifi
    - guifi budgets: git clone https://github.com/guifi/drupal-budgets budgets
- install instructions in /var/www/html/guifi/INSTALL.txt
  - cd /var/www/html/guifi
  - cp sites/default/default.settings.php sites/default/settings.php
  - chmod o+w sites/default/settings.php
  - chmod o+w sites/default
  - when achieved database part we have to create a database
    - mysql -u root -p
      - create database guifi_test;
      - grant all on guifi_test.* to guifi@localhost identified by 'guifinet';
  - put ip 10.1.56.199
  - untar directory sites/all/modules  =for i in *.tar.gz; do tar -xvf $i; done=
    - src http://forums.devshed.com/linux-help-33/tar-wildcards-un-tar-multiple-files-349451.html
  - web installation finished, exit write permissions to avoid security risks (from INSTALL.txt)
    - =chmod a-w sites/default/settings.php=
    - =chmod a-w sites/default=
  - current state of database:
    - cd /root
    - wget http://www.guifi.net/guifi66_devel.sql.gz
    - compression/decompression of gzip
      - compress: =gzip file.txt=
      - decompress: =gunzip file.txt.gz=
      - does not keep the original, to do it, pass it to stdin =gzip/gunzip -c input > output=
        - src http://unix.stackexchange.com/questions/46786/how-to-tell-gzip-to-keep-original-file
    - =mysql -u root -p guifi_test < guifi66_devel.sql=
  - more things to apply in /var/www/html/guifi
    - =echo "RewriteBase /guifi" >> .htaccess =
    - =mkdir -p {files/nanostation,tmp}=
    - =chmod 777 -R {files,tmp}=
    - =cat << EOF | tee files/.htaccess tmp/.htaccess > /dev/null= and copy the text
      - copy to multiple files, src: http://unix.stackexchange.com/questions/41246/how-to-redirect-output-to-multiple-log-files
      - to append, tee -a
    - =echo "Deny from all" >> tmp/.htaccess=
    - =cat << EOF > robots.txt= and copy the text
    - theme_guifinet2011 installation
      - you have to apply "the changes" of the theme (strange but effective) http://10.1.56.199/guifi/ca/admin/build/themes/settings/guifi.net2011
  - update to drupal core 6.35 using *drush* (CLI for drupal)
    - drush doc: https://www.drupal.org/documentation/modules/drush
    - apt-get install drush
    - cd /var/www/html/guifi
    - drush status
      - got an error and pointed to the page that solves it https://www.drupal.org/node/1029506 this error will not be showed again, updated database with this changes
        - mysql -u root -p 
          - UPDATE users SET uid = 0 WHERE name = '';
      - output
        #+begin_src 
        drush st
        Drupal version                  :  6.35                  
        Site URI                        :  http://default        
        Database driver                 :  mysqli                
        Database hostname               :  localhost             
        Database username               :  root                  
        Database name                   :  guifi_test            
        Database                        :  Connected             
        Drupal bootstrap                :  Successful            
        Drupal user                     :  Anonymous             
        Default theme                   :  guifi.net2011         
        Administration theme            :  guifi.net2011         
        PHP configuration               :  /etc/php5/cli/php.ini 
        Drush version                   :  5.10.0                
        Drush configuration             :                        
        Drupal root                     :  /var/www/html/guifi   
        Site path                       :  sites/default         
        File directory path             :  files                 
        Temporary file directory path   :  tmp    
        #+end_src
    - update: =drush up=
      - only security updates: drush up --security-only
        - or drush up --security-only --simulate
        - src http://drupal.stackexchange.com/questions/71576/how-do-i-update-drupal-7-core-with-only-security-patches
      - output example (not all modules installed)
        #+begin_src
        Update information last refreshed: Wed, 13/05/2015 - 20:26

        Update status information on all installed and enabled Drupal projects:
         Name                                   Installed version  Proposed version  Status                                             
         Drupal                                 6.35               6.35              Up to date                                         
         CAPTCHA (captcha)                      6.x-2.6            6.x-2.6           Up to date                                         
         CKEditor (ckeditor)                    6.x-1.15           6.x-1.15          Up to date                                         
         cck                                    6.x-2.9            6.x-2.9           Up to date                                         
         Devel (devel)                          6.x-1.28           6.x-1.28          Up to date                                         
         Diff (diff)                            6.x-2.3            6.x-2.3           Up to date                                         
         Event (event)                          6.x-2.x-dev        6.x-2.x-dev       Up to date                                         
         Fivestar (fivestar)                    6.x-1.21           6.x-1.21          Up to date                                         
         Internationalization (i18n)            6.x-1.10           6.x-1.10          Up to date                                         
         Image (image)                          6.x-1.2            6.x-1.2           Up to date                                         
         Image Filter (image_filter)            6.x-1.0            6.x-1.0           Up to date                                         
         Localization client (l10n_client)      6.x-2.2            6.x-2.2           Up to date                                         
         Language Sections (language_sections)  6.x-2.5            6.x-2.5           Up to date                                         
         Translation template extractor (potx)  6.x-3.3            6.x-3.3           Up to date                                         
         Schema (schema)                        6.x-1.7            6.x-1.7           Up to date                                         
         Views (views)                          6.x-2.18           6.x-2.18          Up to date                                         
         Views Slideshow (views_slideshow)      6.x-2.4            6.x-2.4           Up to date                                         
         Voting API (votingapi)                 6.x-2.3            6.x-2.3           Up to date                                         
         Webform (webform)                      6.x-3.23           6.x-3.23          Up to date                                         
         Budgets (budgets)                      Unknown            Unknown           Project was not packaged by drupal.org but         
                                                                                     obtained from git. You need to enable git_deploy   
                                                                                     module                                             
         guifi.net (guifi)                      Unknown            Unknown           Project was not packaged by drupal.org but         
                                                                                     obtained from git. You need to enable git_deploy   
                                                                                     module                                             
         guifi.net2011 (guifi.net2011)          Unknown            Unknown           Project was not packaged by drupal.org but         
                                                                                      obtained from git. You need to enable git_deploy   
                                                                                      module
        #+end_src
      - I tried with other commands, but I didn't get a complete update
        - =drush pm-update drupal=
          - not update to the latest: https://www.drupal.org/taxonomy/term/34882
        - =drush pm-update devel=
** <2015-05-06 Wed>--<2015-05-12 Tue>
*** <2015-05-12 Tue>
- SRV and NAPTR
  - SRV: http://www.onsip.com/about-voip/sip/dns-srv-records-sip
  - SRV NAPTR: http://anders.com/cms/264/
    - standard "A" DNS record lookups won't tell you anything about which of these protocols to use
    - /NAPTR see what SRV records are available/
- LDAP
  - ACL means (Access Control List) http://en.wikipedia.org/wiki/Access_control_list
- https://webrtchacks.com/signalling-options-for-webrtc-applications/
  - Good Architectural Introduction to WebRTC http://prezi.com/qwejmltpng8x/webrtc/
  - Problems with SIP over Websocket
    - big obstacle to deployments in those environments where HTTP middleboxes (e.g.  corporate proxies or transparent content optimization systems) do not support it
    - On the other hand, the SIP protocol is not designed — and not easily adaptable — to make use of the Trickle ICE optimization essential for minimizing connectivity establishment time. In quite common situations, it can lead to delays intolerable for the end user.
      - In particular, the delays with non-trickle ICE connectivity establishment happen when the user endpoint is configured with one or more network interfaces that cannot reach the STUN and TURN servers. This is a common situation with multi-homed devices such as smartphones that simultaneously connect to 3G/4G and WiFi networks, but also with laptops running VPNs, virtual machines, or simply configured with non-reachable IPv6 address. As a reference point, although with absolutely no scientific relevance, the sipML5 live demo running on a box with an active OpenVPN instance (at the very same time this article is being written) takes more than ten seconds to fire the initial INVITE out. Disconnecting the VPN takes the delay down to less than one second.
        - more: https://tools.ietf.org/html/draft-ietf-mmusic-trickle-ice-sip-01
  - XMPP-based signalling is frequently discussed in WebRTC-related forums — and will certainly emerge
- XMPP inspection
  - RFC7395: An Extensible Messaging and Presence Protocol (XMPP) Subprotocol for WebSocket. /The same that I found for SIP over Websockets/
    - http://tools.ietf.org/html/rfc7395
    - in introduction recognises that BOSH is a hacking, but that websockets is better approach
      - https://blog.andyet.com/2014/10/30/websocket
  - prosody
    - anonymous logins: http://prosody.im/doc/anonymous_logins
    - websocket module: http://prosody.im/doc/modules/mod_websocket
  - javascript xmpp (web) clients (not tested)
    - https://conversejs.org/
      - support websocket
        - https://github.com/jcbrand/converse.js/issues/204
        - https://github.com/jcbrand/converse.js/issues/316
    - https://www.jsxc.org/ Add real-time XMPP chat to any web application!
    - https://candy-chat.github.io/candy/ -> I like, seems similar to webchat.freenode.net , but uses old technologies. Extract design?
      - seems supported webrtc early http://candy-chat.github.io/candy-webrtc/
      - and is based on strophejs
      - its developer also did:
        - https://github.com/mweibel/sdpToJingle
      - mailing list: https://groups.google.com/forum/#!forum/candy-chat
    - javascript libraries compatible with websockets
      - strophe (most important) http://strophe.im/strophejs/ (in github is more popular than stanza)
        - plugins https://github.com/strophe/strophejs-plugins
        - writing strophe plug-ins http://professionalxmpp.com/profxmpp_ch14.pdf
        - book: Professional XMPP
      - stanza https://github.com/otalk/stanza.io
        - supports XEP-0313 (message archive management)
        - works with RFC7395 src https://github.com/otalk/stanza.io#important-protocol-changes
        - used in http://otalk.org/ http://talky.io jitsi style
          - otalk server https://github.com/andyet/otalk-server
      - node-xmpp https://github.com/node-xmpp/node-xmpp
        - https://github.com/node-xmpp/node-xmpp/issues/217
*** <2015-05-08 Fri>
- Privacy issue makes that Firefox Hello is not available in Iceweasel (the unbranded Firefox) https://labs.parabola.nu/issues/677
*** <2015-05-07 Thu>
- how it works trysip temporary account: https://groups.google.com/forum/#!topic/jssip/EaWrPq8YTvA "OverSIP and Kamailio don't ask for SIP authentication so the REGISTER coming from JsSIP is just allowed (before that, OverSIP verifies that the WS connection comes from a script running in "http://tryit.jssip.net" and some others verifications).
- disable auth, just =# route(AUTH);= in kamailio.cg
- https://webrtchacks.com/webrtctrunk/
  - "Take your WebRTC calls and route them over a SIP trunks"
  - Ephemeral Authentication http://kamailio.org/docs/modules/4.1.x/modules/auth_ephemeral.html
    - http://www.kamailio.org/w/tag/ephemeral/
      - credentials will be requested from the web-service using an HTTP GET and provided in a JSON response. To prevent unauthorised use the HTTP requests can be ACLd by various means.
      - request/response: http://kamailio.org/docs/modules/4.1.x/modules/auth_ephemeral.html#idp18624880
  - This allows to open registration in SIP server for trusted webserver/webrtc app
- Choice of webrtc javascript libraries https://webrtchacks.com/whats-in-a-webrtc-javascript-library/
  - more webrtc tools: https://webrtchacks.com/vendor-directory/
  - Common WebRTC JS library API Mechanisms
    - Initialization of the library
    - Registration
    - Create and Manage WebRTC Sessions
    - Event Callbacks: notify/debug
  - Signalling transport: HTTP, Comet, Bosh, Websockets
  - Signalling protocol options: XMPP, REST, XML, JSON, SIP
  - The problem for HTTP, and especially REST, that they are inherently stateless, with strict client-server roles
  - For a good WebRTC signaling channel, a state-ful connection is needed, where request messages can be pushed at any time from the server
  - Check Orca.  If there was any concern that the variance in these APIs was too great, and you wanted to keep your code agnostic to the WebRTC JS library underneath, there are even industry efforts and vendors that offer to help with that (for example ORCA.js ) by maintaining a bit of JavaScript wrapper around the WebRTC JS library API.
- https://webrtchacks.com/orca/ Open Real-Time Communications APIs
  - The strength of WebRTC is its focus on enabling realtime media for browser-based applications. Although this has clear value, it also has limitations for developers:
    - signalling out of scope
    - running in browser with continuous update cycle
    - adaptation to legacy protocols
  - Reflector protocol: minimal signaling server that uses WebSocket and JSON elements to exchange messages.
- https://webrtchacks.com/webrtc-gw/
  - about gateways, functional requirements
    - architectural
    - protocols
    - media management
    - signalling
    - putting this all together
  - Signalling: If you want it to be as generic as possible, as I did, an alternative approach may be relying on an ad-hoc protocol, e.g., based on JSON or XML, which leaves you the greatest freedom when it comes to design a bridge to other technologies.
  - https://github.com/meetecho/janus-gateway
- https://webrtchacks.com/webrtc-beyond-one-one/ (RTP topologies)
  - Centralized vs P2P
  - Mixing vs Routing
  - Mesh problem: low uplink and too much CPU in end client
- others
  - https://webrtchacks.com/tool-time-introducing-the-webrtc-developer-tool-vendor-directory/
  - http://en.wikipedia.org/wiki/E.164
    - max length 15 http://electronics.howstuffworks.com/telephone-country-codes3.htm
- other things
  - A high-performance software proxy that brings control to your VoIP network. http://www.rtpproxy.org/
  - command line sip client:
    - https://github.com/tmakkonen/sipcmd
    - http://www.pjsip.org/download.htm
  - honey pot: http://blog.pepelux.org/2013/06/22/creando-un-honeypot-con-kamailio/
    - protect against SIP scanners: http://diablo.craem.net/?p=967
** <2015-04-22 Wed>--<2015-05-06 Wed>
*** <2015-05-06 Wed>
- kurento open source media server https://www.kurento.org/docs/current/tutorials.html LGPLv2.1 https://github.com/Kurento/kurento-media-server
  - streaming webrtc https://www.kurento.org/docs/current/tutorials/node/tutorial-3-one2many.html
  - p2p: http://stackoverflow.com/questions/20056683/webrtc-multicast-one-to-many
  - review: https://webrtchacks.com/kurento/
- SFU: https://jitsi.org/Projects/JitsiVideobridge
  - jitsi meet: https://github.com/jitsi/jitsi-meet
  - this is a XMPP solution. SIP gateway, "jigasi": https://github.com/jitsi/jigasi
- read
  - https://webrtchacks.com/webrtc-beyond-one-one/
  - https://bloggeek.me/webrtc-broadcast/
  - https://bloggeek.me/webrtc-multipoint-small-groups/
  - https://bloggeek.me/webrtc-multipoint-large-groups/
*** <2015-05-05 Tue>
- draws
  - [[img/poc-architecture-draft.png]]
  - [[img/implementation-draft.png]]
*** <2015-05-04 Mon>
- show users registered: kamctl db show subscriber
- guifi.net integration
  - LDAP: unique users search name@* in all servers
    - legacy system prefix + user number (drupal) ? (variable length in sip enum?)
    - LDAP can be downloaded locally?
  - fix dnsservices (naptr, srv) in bind dns: https://github.com/guifi/dnsservices/blob/master/dnsservices.php
    - dns setup guide: http://www.rtcquickstart.org/dns-setup
    - general guide www.rtcquickstart.org/
    - need guifi's drupal development environment
  - scalability: cloudy, sip trunking ?
- others
  - http://www.rtcquickstart.org/ICE-STUN-TURN-server-installation
- advanced
  - multiuser chat/video/audio
*** <2015-05-03 Sun>
- install cloudy KVM with proxmox
- configure kamailio: http://kb.asipto.com/kamailio:skype-like-service-in-less-than-one-hour
  - changes, I use wheezy
    - wget http://deb.kamailio.org/kamailiodebkey.gpg
    - apt-key add kamailiodebkey.gpg
  - password MySQL with kamailio: kamailio/kamailiorw kamailioro/kamailioro
  - upgraded steps:
    - https://quobis.atlassian.net/wiki/display/QoffeeSIP/Server+configurations
  - changes 64bit (mpath="/usr/lib64/kamailio/modules/") mpath to 32bit (mpath="/usr/lib/i386-linux-gnu/kamailio/modules/")
*** <2015-04-29 Wed>
- SRV, NAPTR seems to be needed in case of domain?
- here is not dnsservices https://github.com/guifi/dnsservices
- mounting a new machine for the tests
*** <2015-04-28 Tue>
- guifi.net proxies are problematic for webrtc applications, but as they use websockets (proof that), we can use websockets proxy. http://nginx.com/blog/realtime-applications-nginx/ http://en.wikipedia.org/wiki/WebSocket#Proxy_traversal
- Started with jscomunicator because it details how to use a sip proxy
  - http://jscommunicator.org/quickstart
    - Set up a SIP proxy
      - DNS setup needed: http://www.rtcquickstart.org/dns-setup
        - can I use a qui.guifi.net subdomain? no
        - alternatives (start with free dns services in internet)
          - https://www.heroicdebugging.biz/2014/03/05/adding-srv-records-at-httpfreednsafraidorg/
          - http://www.noip.com/support/knowledgebase/how-to-add-a-srv-record-to-your-minecraft-server-remove-the-port-on-the-end-of-the-url/
        - I will have to look at guifi dnsservices ??? How was resolved this by the UAB work -> it was not resolved. didn't touch DNS
    - Set up the web server
*** <2015-04-24 Fri>
- I started organizing contents of the past weeks that took me to this situation

**** WebRTC demo
Succeded in the most easy way to try WebRTC between two computers,
very interesting to do a demo

: sudo apt-get install apache2
: cd /var/www
: git clone https://github.com/peers/peerjs/
: cd peerjs
: mv examples/videochat/* .

change
: <script type="text/javascript" src="/dist/peer.js"></script>
to
: <script type="text/javascript" src="dist/peer.js"></script>

One browser:
: localhost/peerjs/index.html

Other browser:
: <ip>/peerjs.index.html

Update:
Signalling server in the internet
**** Others
- Other WebRTC services
  - https://github.com/strukturag/spreed-webrtc
  - https://github.com/jitsi/jitsi-meet
- WebRTC libraries
  - What's PeerJS? http://peerjs.com/
  - What's Simple Peer? https://github.com/feross/simple-peer
- Related to cloudy
  - Interesting related project: https://github.com/netmackan/socialhost
  - Something to say about etcd (used in cloudy):
    https://aphyr.com/posts/316-call-me-maybe-etcd-and-consul
